<mat-card class="app-quote-card" appearance="outlined">
  <ng-container *ngIf="order; else noOrder">
    <mat-card-header>
      <mat-card-title-group>
        <mat-card-title>{{ order.product }}</mat-card-title>
        <mat-card-subtitle>
          {{ "Orçamento #" + order.id }}
        </mat-card-subtitle>
      </mat-card-title-group>
      <app-tag [variant]="order.situation" />
    </mat-card-header>

    <mat-card-content>
      <div class="details-wrap">
        <div class="detail-item">
          <mat-icon>person</mat-icon>
          <div class="text-wrap">
            <p>Cliente</p>
            <span>{{ order.client }}</span>
          </div>
        </div>

        <div class="detail-item">
          <mat-icon>calendar_today</mat-icon>
          <div class="text-wrap">
            <p>Data da Solicitação</p>
            <span>{{ order.order_date }}</span>
          </div>
        </div>

        <div class="detail-item">
          <mat-icon>category</mat-icon>
          <div class="text-wrap">
            <p>Categoria</p>
            <span>{{ order.category }}</span>
          </div>
        </div>

        <div class="detail-item">
          <mat-icon>engineering</mat-icon>
          <div class="text-wrap">
            <p>Técnico responsável</p>
            <span>{{ order.atributed_employee }}</span>
          </div>
        </div>

        @if (order.budge_date) {
        <div class="detail-item">
          <mat-icon>schedule</mat-icon>
          <div class="text-wrap">
            <p>Data do Orçamento</p>
            <span>{{ order.budge_date }}</span>
          </div>
        </div>
        }
      </div>

      <div class="separator"></div>

      <div class="issue-related-wrapper">
        <p>Problema relatado</p>
        <div class="issue-related-box">
          {{ order.issue_description }}
        </div>
      </div>

      <div class="separator"></div>

      <div class="box-padding">
        <div class="quote-box">
          <mat-icon>attach_money</mat-icon>
          <div class="quote-text-wrap">
            <p>Valor do orçamento</p>
            <span>R$ {{ order.price }}</span>
          </div>
        </div>
      </div>

      <div class="separator"></div>
    </mat-card-content>
    <mat-card-footer>
      <div style="width: 100%;display: flex; flex-direction: row; gap: 0.5rem;">
        <app-button
          style="width: 100%"
          title="Rejeitar o Serviço"
          variant="destructive"
          [link]="'/client/reject/'+ order.id"
        />
        <app-button
          style="width: 100%"
          title="Aprovar o Serviço"
          icon="check"
          variant="success"
          (click)="approveService()"
        />
      </div>
      <p>
        Após aprovação, a manutenção será iniciada. O pagamento só será
        solicitado após a conclusão do serviço.
      </p>
    </mat-card-footer>
  </ng-container>
  <ng-template #noOrder>
    <p>a</p>
  </ng-template>
</mat-card>
